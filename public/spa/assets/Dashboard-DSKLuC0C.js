import"./request-DPtWsdmB.js";/* empty css               *//* empty css                   *//* empty css                  *//* empty css                             *//* empty css                 *//* empty css                     */import{r,I as Y,J as $,p as B,c,o as l,b as e,d as s,K as L,x as n,w as u,L as N,g as k,M as P,k as A,l as T,E as I,N as z,O as F,P as O,Q as U,q as j,R as q,S as H,n as J}from"./index-B4p3Y3uI.js";import{u as K,g as Q,a as G,b as W,i as X,c as Z,d as tt,e as et,f as st}from"./statistics-h6E_3O4k.js";import{_ as at}from"./RecordDialog-BG5FaUUo.js";import{_ as ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                     *//* empty css               *//* empty css                  *//* empty css                 */import"./categories-58bDfnwB.js";import"./records-C1eas08k.js";const lt={class:"dashboard"},nt={class:"page-header"},it={class:"stats-grid"},dt={class:"stat-card income-card"},rt={class:"stat-value"},ct={class:"stat-card expense-card"},ut={class:"stat-value"},mt={class:"stat-card balance-card"},pt={class:"stat-value"},vt={class:"stat-card monthly-card"},_t={class:"stat-value"},yt={class:"card"},ft={class:"card-header"},ht={key:0,class:"loading-container"},gt={key:1,class:"empty-state"},xt={key:2,class:"records-list"},Dt={class:"record-info"},bt={class:"record-category"},Yt={class:"record-remark"},kt={class:"card"},Mt={class:"chart-container"},St={key:1,class:"empty-state"},Rt={__name:"Dashboard",setup(Ct){K([X,Z,tt,et,st]);const h=r(!1),y=r(Y().format("YYYY-MM-DD")),g=r(!1),m=r({income:0,expense:0}),x=r({income:0,expense:0}),p=r([]),i=r([]),v=a=>Number(a).toFixed(2),S=$(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["收入","支出"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:i.value.map(a=>Y(a.date).format("MM-DD"))},yAxis:{type:"value",axisLabel:{formatter:"¥{value}"}},series:[{name:"收入",type:"line",data:i.value.map(a=>a.income),itemStyle:{color:"#67c23a"},smooth:!0},{name:"支出",type:"line",data:i.value.map(a=>a.expense),itemStyle:{color:"#f56c6c"},smooth:!0}]})),D=async()=>{var a,t,f;h.value=!0;try{m.value={income:0,expense:0},x.value={income:0,expense:0},p.value=[],i.value=[];const d=await Q({date:y.value});m.value={income:((a=d.data)==null?void 0:a.income)||0,expense:((t=d.data)==null?void 0:t.expense)||0},p.value=((f=d.data)==null?void 0:f.records)||[];const _=await G({month:Y(y.value).format("YYYY-MM")});x.value=_.data||{income:0,expense:0};const b=await W({days:7});i.value=b.data||[]}catch(d){console.error("获取仪表盘数据失败:",d),p.value=[],i.value=[]}finally{h.value=!1}},R=()=>{D(),J.success("记录添加成功")};return B(()=>{D()}),(a,t)=>{const f=L,d=k("Plus"),_=I,b=A,C=z,E=k("DocumentRemove"),M=P,V=k("TrendCharts"),w=N;return l(),c("div",lt,[e("div",nt,[t[3]||(t[3]=e("h1",{class:"page-title"},"仪表盘",-1)),s(f,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=o=>y.value=o),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:D},null,8,["modelValue"])]),e("div",it,[e("div",dt,[e("div",rt,"¥"+n(v(m.value.income)),1),t[4]||(t[4]=e("div",{class:"stat-label"},"今日收入",-1))]),e("div",ct,[e("div",ut,"¥"+n(v(m.value.expense)),1),t[5]||(t[5]=e("div",{class:"stat-label"},"今日支出",-1))]),e("div",mt,[e("div",pt,"¥"+n(v(m.value.income-m.value.expense)),1),t[6]||(t[6]=e("div",{class:"stat-label"},"今日结余",-1))]),e("div",vt,[e("div",_t,"¥"+n(v(x.value.expense)),1),t[7]||(t[7]=e("div",{class:"stat-label"},"本月支出",-1))])]),s(w,{gutter:20},{default:u(()=>[s(M,{span:12},{default:u(()=>[e("div",yt,[e("div",ft,[t[9]||(t[9]=e("h3",null,"明细",-1)),s(b,{type:"primary",size:"small",onClick:t[1]||(t[1]=o=>g.value=!0)},{default:u(()=>[s(_,null,{default:u(()=>[s(d)]),_:1}),t[8]||(t[8]=T(" 记一笔 ",-1))]),_:1})]),h.value?(l(),c("div",ht,[s(C)])):p.value.length===0?(l(),c("div",gt,[s(_,null,{default:u(()=>[s(E)]),_:1}),t[10]||(t[10]=e("p",null,"暂无记录",-1))])):(l(),c("div",xt,[(l(!0),c(F,null,O(p.value,o=>(l(),c("div",{key:o.id,class:"record-item"},[e("div",Dt,[e("div",bt,n(o.category.name),1),e("div",Yt,n(o.remark||"无备注"),1)]),e("div",{class:U(["record-amount",o.type])},n(o.type==="income"?"+":"-")+"¥"+n(v(o.amount)),3)]))),128))]))])]),_:1}),s(M,{span:12},{default:u(()=>[e("div",kt,[t[12]||(t[12]=e("div",{class:"card-header"},[e("h3",null,"近7天趋势")],-1)),e("div",Mt,[i.value.length>0?(l(),j(q(H),{key:0,option:S.value},null,8,["option"])):(l(),c("div",St,[s(_,null,{default:u(()=>[s(V)]),_:1}),t[11]||(t[11]=e("p",null,"暂无趋势数据",-1))]))])])]),_:1})]),_:1}),s(at,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=o=>g.value=o),onSuccess:R},null,8,["modelValue"])])}}},Ht=ot(Rt,[["__scopeId","data-v-f0c0dda4"]]);export{Ht as default};
