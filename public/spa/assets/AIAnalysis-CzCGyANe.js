import{r as Ze}from"./request-DPtWsdmB.js";/* empty css                     *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                             *//* empty css                 *//* empty css                  *//* empty css                 */import{fP as et,fQ as tt,r as ve,a as nt,I as He,J as rt,p as at,c as X,o as Y,b,fR as W,d as p,w as D,k as ot,_ as st,f as it,q as Re,E as lt,O as je,P as qe,x as oe,fS as dt,g as xe,l as re,$ as ut,h as ct,K as ft,a0 as vt,a1 as pt,Y as ht,n as P}from"./index-B4p3Y3uI.js";import{_ as yt}from"./_plugin-vue_export-helper-DlAUqK2U.js";var Ve={exports:{}};/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */(function(we,w){(function(v){var h=v.setTimeout,x=v.clearTimeout,S=v.XMLHttpRequest,N=v.XDomainRequest,T=v.ActiveXObject,se=v.EventSource,U=v.document,Ie=v.Promise,ie=v.fetch,Se=v.Response,le=v.TextDecoder,Te=v.TextEncoder,pe=v.AbortController;if(typeof window<"u"&&typeof U<"u"&&!("readyState"in U)&&U.body==null&&(U.readyState="loading",window.addEventListener("load",function(e){U.readyState="complete"},!1)),S==null&&T!=null&&(S=function(){return new T("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(e){function n(){}return n.prototype=e,new n}),Date.now||(Date.now=function(){return new Date().getTime()}),pe==null){var Fe=ie;ie=function(e,n){var a=n.signal;return Fe(e,{headers:n.headers,credentials:n.credentials,cache:n.cache}).then(function(t){var s=t.body.getReader();return a._reader=s,a._aborted&&a._reader.cancel(),{status:t.status,statusText:t.statusText,headers:t.headers,body:{getReader:function(){return s}}}})},pe=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function be(){this.bitsNeeded=0,this.codePoint=0}be.prototype.decode=function(e){function n(u,f,i){if(i===1)return u>=128>>f&&u<<f<=2047;if(i===2)return u>=2048>>f&&u<<f<=55295||u>=57344>>f&&u<<f<=65535;if(i===3)return u>=65536>>f&&u<<f<=1114111;throw new Error}function a(u,f){if(u===6*1)return f>>6>15?3:f>31?2:1;if(u===6*2)return f>15?3:2;if(u===6*3)return 3;throw new Error}for(var t=65533,s="",o=this.bitsNeeded,l=this.codePoint,m=0;m<e.length;m+=1){var d=e[m];o!==0&&(d<128||d>191||!n(l<<6|d&63,o-6,a(o,l)))&&(o=0,l=t,s+=String.fromCharCode(l)),o===0?(d>=0&&d<=127?(o=0,l=d):d>=192&&d<=223?(o=6*1,l=d&31):d>=224&&d<=239?(o=6*2,l=d&15):d>=240&&d<=247?(o=6*3,l=d&7):(o=0,l=t),o!==0&&!n(l,o,a(o,l))&&(o=0,l=t)):(o-=6,l=l<<6|d&63),o===0&&(l<=65535?s+=String.fromCharCode(l):(s+=String.fromCharCode(55296+(l-65535-1>>10)),s+=String.fromCharCode(56320+(l-65535-1&1023))))}return this.bitsNeeded=o,this.codePoint=l,s};var y=function(){try{return new le().decode(new Te().encode("test"),{stream:!0})==="test"}catch(e){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+e)}return!1};(le==null||Te==null||!y())&&(le=be);var r=function(){};function M(e){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=r,this.onload=r,this.onerror=r,this.onreadystatechange=r,this._contentType="",this._xhr=e,this._sendTimeout=0,this._abort=r}M.prototype.open=function(e,n){this._abort(!0);var a=this,t=this._xhr,s=1,o=0;this._abort=function(i){a._sendTimeout!==0&&(x(a._sendTimeout),a._sendTimeout=0),(s===1||s===2||s===3)&&(s=4,t.onload=r,t.onerror=r,t.onabort=r,t.onprogress=r,t.onreadystatechange=r,t.abort(),o!==0&&(x(o),o=0),i||(a.readyState=4,a.onabort(null),a.onreadystatechange())),s=0};var l=function(){if(s===1){var i=0,_="",G=void 0;if("contentType"in t)i=200,_="OK",G=t.contentType;else try{i=t.status,_=t.statusText,G=t.getResponseHeader("Content-Type")}catch{i=0,_="",G=void 0}i!==0&&(s=2,a.readyState=2,a.status=i,a.statusText=_,a._contentType=G,a.onreadystatechange())}},m=function(){if(l(),s===2||s===3){s=3;var i="";try{i=t.responseText}catch{}a.readyState=3,a.responseText=i,a.onprogress()}},d=function(i,_){if((_==null||_.preventDefault==null)&&(_={preventDefault:r}),m(),s===1||s===2||s===3){if(s=4,o!==0&&(x(o),o=0),a.readyState=4,i==="load")a.onload(_);else if(i==="error")a.onerror(_);else if(i==="abort")a.onabort(_);else throw new TypeError;a.onreadystatechange()}},u=function(i){t!=null&&(t.readyState===4?(!("onload"in t)||!("onerror"in t)||!("onabort"in t))&&d(t.responseText===""?"error":"load",i):t.readyState===3?"onprogress"in t||m():t.readyState===2&&l())},f=function(){o=h(function(){f()},500),t.readyState===3&&m()};"onload"in t&&(t.onload=function(i){d("load",i)}),"onerror"in t&&(t.onerror=function(i){d("error",i)}),"onabort"in t&&(t.onabort=function(i){d("abort",i)}),"onprogress"in t&&(t.onprogress=m),"onreadystatechange"in t&&(t.onreadystatechange=function(i){u(i)}),("contentType"in t||!("ontimeout"in S.prototype))&&(n+=(n.indexOf("?")===-1?"?":"&")+"padding=true"),t.open(e,n,!0),"readyState"in t&&(o=h(function(){f()},0))},M.prototype.abort=function(){this._abort(!1)},M.prototype.getResponseHeader=function(e){return this._contentType},M.prototype.setRequestHeader=function(e,n){var a=this._xhr;"setRequestHeader"in a&&a.setRequestHeader(e,n)},M.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},M.prototype.send=function(){if((!("ontimeout"in S.prototype)||!("sendAsBinary"in S.prototype)&&!("mozAnon"in S.prototype))&&U!=null&&U.readyState!=null&&U.readyState!=="complete"){var e=this;e._sendTimeout=h(function(){e._sendTimeout=0,e.send()},4);return}var n=this._xhr;"withCredentials"in n&&(n.withCredentials=this.withCredentials);try{n.send(void 0)}catch(a){throw a}};function L(e){return e.replace(/[A-Z]/g,function(n){return String.fromCharCode(n.charCodeAt(0)+32)})}function K(e){for(var n=Object.create(null),a=e.split(`\r
`),t=0;t<a.length;t+=1){var s=a[t],o=s.split(": "),l=o.shift(),m=o.join(": ");n[L(l)]=m}this._map=n}K.prototype.get=function(e){return this._map[L(e)]},S!=null&&S.HEADERS_RECEIVED==null&&(S.HEADERS_RECEIVED=2);function Z(){}Z.prototype.open=function(e,n,a,t,s,o,l){e.open("GET",s);var m=0;e.onprogress=function(){var u=e.responseText,f=u.slice(m);m+=f.length,a(f)},e.onerror=function(u){u.preventDefault(),t(new Error("NetworkError"))},e.onload=function(){t(null)},e.onabort=function(){t(null)},e.onreadystatechange=function(){if(e.readyState===S.HEADERS_RECEIVED){var u=e.status,f=e.statusText,i=e.getResponseHeader("Content-Type"),_=e.getAllResponseHeaders();n(u,f,i,new K(_))}},e.withCredentials=o;for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&e.setRequestHeader(d,l[d]);return e.send(),e};function g(e){this._headers=e}g.prototype.get=function(e){return this._headers.get(e)};function c(){}c.prototype.open=function(e,n,a,t,s,o,l){var m=null,d=new pe,u=d.signal,f=new le;return ie(s,{headers:l,credentials:o?"include":"same-origin",signal:u,cache:"no-store"}).then(function(i){return m=i.body.getReader(),n(i.status,i.statusText,i.headers.get("Content-Type"),new g(i.headers)),new Ie(function(_,G){var ge=function(){m.read().then(function(H){if(H.done)_(void 0);else{var I=f.decode(H.value,{stream:!0});a(I),ge()}}).catch(function(H){G(H)})};ge()})}).catch(function(i){if(i.name!=="AbortError")return i}).then(function(i){t(i)}),{abort:function(){m!=null&&m.cancel(),d.abort()}}};function $(){this._listeners=Object.create(null)}function de(e){h(function(){throw e},0)}$.prototype.dispatchEvent=function(e){e.target=this;var n=this._listeners[e.type];if(n!=null)for(var a=n.length,t=0;t<a;t+=1){var s=n[t];try{typeof s.handleEvent=="function"?s.handleEvent(e):s.call(this,e)}catch(o){de(o)}}},$.prototype.addEventListener=function(e,n){e=String(e);var a=this._listeners,t=a[e];t==null&&(t=[],a[e]=t);for(var s=!1,o=0;o<t.length;o+=1)t[o]===n&&(s=!0);s||t.push(n)},$.prototype.removeEventListener=function(e,n){e=String(e);var a=this._listeners,t=a[e];if(t!=null){for(var s=[],o=0;o<t.length;o+=1)t[o]!==n&&s.push(t[o]);s.length===0?delete a[e]:a[e]=s}};function ee(e){this.type=e,this.target=void 0}function he(e,n){ee.call(this,e),this.data=n.data,this.lastEventId=n.lastEventId}he.prototype=Object.create(ee.prototype);function ye(e,n){ee.call(this,e),this.status=n.status,this.statusText=n.statusText,this.headers=n.headers}ye.prototype=Object.create(ee.prototype);function Ce(e,n){ee.call(this,e),this.error=n.error}Ce.prototype=Object.create(ee.prototype);var me=-1,B=0,te=1,E=2,_e=-1,ne=0,Oe=1,ke=2,Be=3,Xe=/^text\/event\-stream(;.*)?$/i,$e=1e3,Ge=18e6,Ne=function(e,n){var a=e==null?n:parseInt(e,10);return a!==a&&(a=n),Me(a)},Me=function(e){return Math.min(Math.max(e,$e),Ge)},ue=function(e,n,a){try{typeof n=="function"&&n.call(e,a)}catch(t){de(t)}};function j(e,n){$.call(this),n=n||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Qe(this,e,n)}function Je(){return S!=null&&"withCredentials"in S.prototype||N==null?new S:new N}var ze=ie!=null&&Se!=null&&"body"in Se.prototype;function Qe(e,n,a){n=String(n);var t=!!a.withCredentials,s=a.lastEventIdQueryParameterName||"lastEventId",o=Me(1e3),l=Ne(a.heartbeatTimeout,45e3),m="",d=o,u=!1,f=0,i=a.headers||{},_=a.Transport,G=ze&&_==null?void 0:new M(_!=null?new _:Je()),ge=_!=null&&typeof _!="string"?new _:G==null?new c:new Z,H=void 0,I=0,q=me,ce="",Ae="",J="",De="",F=ne,Le=0,ae=0,We=function(A,C,V,k){if(q===B)if(A===200&&V!=null&&Xe.test(V)){q=te,u=Date.now(),d=o,e.readyState=te;var O=new ye("open",{status:A,statusText:C,headers:k});e.dispatchEvent(O),ue(e,e.onopen,O)}else{var R="";A!==200?(C&&(C=C.replace(/\s+/g," ")),R="EventSource's response has a status "+A+" "+C+" that is not 200. Aborting the connection."):R="EventSource's response has a Content-Type specifying an unsupported type: "+(V==null?"-":V.replace(/\s+/g," "))+". Aborting the connection.",Ye();var O=new ye("error",{status:A,statusText:C,headers:k});e.dispatchEvent(O),ue(e,e.onerror,O),console.error(R)}},Ke=function(A){if(q===te){for(var C=-1,V=0;V<A.length;V+=1){var k=A.charCodeAt(V);(k===10||k===13)&&(C=V)}var O=(C!==-1?De:"")+A.slice(0,C+1);De=(C===-1?De:"")+A.slice(C+1),A!==""&&(u=Date.now(),f+=A.length);for(var R=0;R<O.length;R+=1){var k=O.charCodeAt(R);if(F===_e&&k===10)F=ne;else if(F===_e&&(F=ne),k===13||k===10){if(F!==ne){F===Oe&&(ae=R+1);var z=O.slice(Le,ae-1),Q=O.slice(ae+(ae<R&&O.charCodeAt(ae)===32?1:0),R);z==="data"?(ce+=`
`,ce+=Q):z==="id"?Ae=Q:z==="event"?J=Q:z==="retry"?(o=Ne(Q,o),d=o):z==="heartbeatTimeout"&&(l=Ne(Q,l),I!==0&&(x(I),I=h(function(){Ee()},l)))}if(F===ne){if(ce!==""){m=Ae,J===""&&(J="message");var fe=new he(J,{data:ce.slice(1),lastEventId:Ae});if(e.dispatchEvent(fe),J==="open"?ue(e,e.onopen,fe):J==="message"?ue(e,e.onmessage,fe):J==="error"&&ue(e,e.onerror,fe),q===E)return}ce="",J=""}F=k===13?_e:ne}else F===ne&&(Le=R,F=Oe),F===Oe?k===58&&(ae=R+1,F=ke):F===ke&&(F=Be)}}},Ue=function(A){if(q===te||q===B){q=me,I!==0&&(x(I),I=0),I=h(function(){Ee()},d),d=Me(Math.min(o*16,d*2)),e.readyState=B;var C=new Ce("error",{error:A});e.dispatchEvent(C),ue(e,e.onerror,C),A!=null&&console.error(A)}},Ye=function(){q=E,H!=null&&(H.abort(),H=void 0),I!==0&&(x(I),I=0),e.readyState=E},Ee=function(){if(I=0,q!==me){if(!u&&H!=null)Ue(new Error("No activity within "+l+" milliseconds. "+(q===B?"No response received.":f+" chars received.")+" Reconnecting.")),H!=null&&(H.abort(),H=void 0);else{var A=Math.max((u||Date.now())+l-Date.now(),1);u=!1,I=h(function(){Ee()},A)}return}u=!1,f=0,I=h(function(){Ee()},l),q=B,ce="",J="",Ae=m,De="",Le=0,ae=0,F=ne;var C=n;if(n.slice(0,5)!=="data:"&&n.slice(0,5)!=="blob:"&&m!==""){var V=n.indexOf("?");C=V===-1?n:n.slice(0,V+1)+n.slice(V+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(Q,fe){return fe===s?"":Q}),C+=(n.indexOf("?")===-1?"?":"&")+s+"="+encodeURIComponent(m)}var k=e.withCredentials,O={};O.Accept="text/event-stream";var R=e.headers;if(R!=null)for(var z in R)Object.prototype.hasOwnProperty.call(R,z)&&(O[z]=R[z]);try{H=ge.open(G,We,Ke,Ue,C,k,O)}catch(Q){throw Ye(),Q}};e.url=n,e.readyState=B,e.withCredentials=t,e.headers=i,e._close=Ye,Ee()}j.prototype=Object.create($.prototype),j.prototype.CONNECTING=B,j.prototype.OPEN=te,j.prototype.CLOSED=E,j.prototype.close=function(){this._close()},j.CONNECTING=B,j.OPEN=te,j.CLOSED=E,j.prototype.withCredentials=void 0;var Pe=se;S!=null&&(se==null||!("withCredentials"in se.prototype))&&(Pe=j),function(e){{var n=e(w);n!==void 0&&(we.exports=n)}}(function(e){e.EventSourcePolyfill=j,e.NativeEventSource=se,e.EventSource=Pe})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:et:globalThis)})(Ve,Ve.exports);var mt=Ve.exports;function _t(we,w){const h={daily:"/analysisDaily",monthly:"/analysisMonthly",recent:"/analysisRecent"}[we];if(!h)throw new Error("不支持的分析类型");const x=new URLSearchParams(w).toString(),N=`${Ze.defaults.baseURL}${h}?${x}`,T=tt();if(!T)throw new Error("未登录或登录已过期");return new mt.EventSourcePolyfill(N,{headers:{Authorization:`Bearer ${T}`},withCredentials:!1,heartbeatTimeout:3e4,connectionTimeout:1e4})}const gt={class:"ai-analysis"},Et={class:"page-header"},wt={class:"card"},St={class:"form-section"},Tt={class:"form-section"},bt={style:{display:"flex","align-items":"center",gap:"12px"}},Ct={key:0,class:"card"},At={class:"card-header"},Dt={key:0,class:"analysis-loading"},Rt={class:"loading-messages"},xt={key:1,class:"ai-analysis-result"},It={class:"ai-content"},Ft={key:2,class:"analysis-error"},Ot={key:1,class:"card"},Nt={class:"card-header"},Mt={class:"history-list"},Lt={class:"history-header"},Yt={class:"history-info"},Ht={class:"history-params"},Vt={class:"history-time"},kt={class:"history-content"},Pt={__name:"AIAnalysis",setup(we){const w=ve(!1),v=ve("daily"),h=ve(""),x=ve(""),S=ve([]),N=ve([]),T=nt({date:He().format("YYYY-MM-DD"),month:He().format("YYYY-MM"),days:7}),se=rt(()=>`近${T.days}天`),U=()=>{h.value="",x.value="",S.value=[]},Ie=async()=>{if(!w.value){U(),w.value=!0,S.value=[];try{let y={};switch(v.value){case"daily":y.date=T.date;break;case"monthly":y.month=T.month;break;case"recent":y.days=T.days;break}const r=_t(v.value,y);r.onopen=()=>{console.log("SSE连接已建立"),S.value.push("已连接到AI服务"),M=!0};let M=!1,L=!1;r.addEventListener("message",g=>{try{if(L=!0,!g.data){console.warn("message事件数据为空");return}const c=JSON.parse(g.data);c.content&&(S.value.push(c.content),(c.content.includes("无数据")||c.content.includes("没有数据")||c.content.includes("无收入支出账单"))&&(h.value=c.content,w.value=!1,r.close(),P.info("查询完成")))}catch(c){console.error("解析message事件失败:",c,"event.data:",g.data)}}),r.addEventListener("analysis",g=>{try{if(L=!0,!g.data){console.warn("analysis事件数据为空");return}const c=JSON.parse(g.data);c.content&&(h.value+=c.content)}catch(c){console.error("解析analysis事件失败:",c,"event.data:",g.data)}}),r.addEventListener("error",g=>{try{if(!g.data)if(console.warn("error事件数据为空，可能是连接错误或服务器直接关闭连接"),M&&!L){console.log("连接已建立但未收到数据，等待message事件...");return}else if(M&&L){h.value="分析过程中出现错误，请重试",P.warning("分析中断"),w.value=!1,r.close();return}else{P.error("连接错误或服务器异常"),w.value=!1,r.close();return}const c=JSON.parse(g.data);P.error(c.message||"分析失败"),w.value=!1,r.close()}catch(c){console.error("解析error事件失败:",c,"event.data:",g.data),P.error("服务器返回了无效的错误信息"),w.value=!1,r.close()}}),r.addEventListener("end",g=>{try{if(L=!0,!g.data){console.warn("end事件数据为空"),w.value=!1,r.close(),P.success("分析完成");return}const c=JSON.parse(g.data);c.content&&(h.value=c.content),ie(),r.close(),w.value=!1,P.success("AI分析完成")}catch(c){console.error("解析end事件失败:",c,"event.data:",g.data),w.value=!1,r.close()}}),r.onerror=g=>{console.error("SSE连接错误:",g),x.value="连接AI分析服务失败，请检查网络连接",r.close(),w.value=!1};const K=setTimeout(()=>{w.value&&(r.close(),w.value=!1,M&&!L?(console.log("分析超时：连接已建立但未收到数据，等待message事件..."),x.value="分析超时，请稍后重试",P.error("分析超时")):(x.value="分析超时，请稍后重试",P.error("分析超时")))},6e4),Z=r.close;r.close=function(){clearTimeout(K),Z.call(this)}}catch(y){console.error("分析失败:",y),x.value=y.message||"启动分析失败",w.value=!1}}},ie=()=>{const y={type:v.value,params:Se(),result:h.value,timestamp:Date.now()};N.value.unshift(y),N.value.length>10&&(N.value=N.value.slice(0,10)),localStorage.setItem("ai_analysis_history",JSON.stringify(N.value))},Se=()=>{switch(v.value){case"daily":return T.date;case"monthly":return T.month;case"recent":return`近${T.days}天`;default:return""}},le=y=>({daily:"日分析",monthly:"月分析",recent:"近期分析"})[y]||y,Te=y=>({daily:"primary",monthly:"success",recent:"warning"})[y]||"info",pe=y=>He(y).format("YYYY-MM-DD HH:mm:ss"),Fe=async()=>{try{await navigator.clipboard.writeText(h.value),P.success("分析结果已复制到剪贴板")}catch{P.error("复制失败")}},be=()=>{N.value=[],localStorage.removeItem("ai_analysis_history"),P.success("历史记录已清空")};return at(()=>{const y=localStorage.getItem("ai_analysis_history");if(y)try{N.value=JSON.parse(y)}catch(r){console.error("加载历史记录失败:",r)}}),(y,r)=>{const M=xe("ChatDotRound"),L=lt,K=ot,Z=ut,g=st,c=ft,$=ct,de=pt,ee=vt,he=ht,ye=it,Ce=xe("CopyDocument"),me=xe("Loading"),B=dt,te=xe("Delete");return Y(),X("div",gt,[b("div",Et,[r[5]||(r[5]=b("h1",{class:"page-title"},"AI分析",-1)),p(K,{type:"primary",loading:w.value,onClick:Ie},{default:D(()=>[p(L,null,{default:D(()=>[p(M)]),_:1}),r[4]||(r[4]=re(" 开始分析 ",-1))]),_:1},8,["loading"])]),b("div",wt,[b("div",St,[r[9]||(r[9]=b("h3",{class:"form-title"},"选择分析类型",-1)),p(g,{modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=E=>v.value=E),onChange:U},{default:D(()=>[p(Z,{label:"daily"},{default:D(()=>[...r[6]||(r[6]=[re("日账单分析",-1)])]),_:1}),p(Z,{label:"monthly"},{default:D(()=>[...r[7]||(r[7]=[re("月账单分析",-1)])]),_:1}),p(Z,{label:"recent"},{default:D(()=>[...r[8]||(r[8]=[re("近期账单分析",-1)])]),_:1})]),_:1},8,["modelValue"])]),b("div",Tt,[p(ye,{model:T,inline:""},{default:D(()=>[v.value==="daily"?(Y(),Re($,{key:0,label:"选择日期"},{default:D(()=>[p(c,{modelValue:T.date,"onUpdate:modelValue":r[1]||(r[1]=E=>T.date=E),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})):W("",!0),v.value==="monthly"?(Y(),Re($,{key:1,label:"选择月份"},{default:D(()=>[p(c,{modelValue:T.month,"onUpdate:modelValue":r[2]||(r[2]=E=>T.month=E),type:"month",placeholder:"选择月份",format:"YYYY-MM","value-format":"YYYY-MM"},null,8,["modelValue"])]),_:1})):W("",!0),v.value==="recent"?(Y(),Re($,{key:2,label:"天数"},{default:D(()=>[b("div",bt,[p(ee,{modelValue:T.days,"onUpdate:modelValue":r[3]||(r[3]=E=>T.days=E),placeholder:"选择天数",style:{width:"120px"}},{default:D(()=>[p(de,{label:"近7天",value:7}),p(de,{label:"近15天",value:15}),p(de,{label:"近30天",value:30})]),_:1},8,["modelValue"]),p(he,{type:"info",size:"small"},{default:D(()=>[re(oe(se.value),1)]),_:1})])]),_:1})):W("",!0)]),_:1},8,["model"])])]),h.value||w.value?(Y(),X("div",Ct,[b("div",At,[r[11]||(r[11]=b("h3",null,"AI分析结果",-1)),h.value?(Y(),Re(K,{key:0,type:"success",size:"small",onClick:Fe},{default:D(()=>[p(L,null,{default:D(()=>[p(Ce)]),_:1}),r[10]||(r[10]=re(" 复制结果 ",-1))]),_:1})):W("",!0)]),w.value?(Y(),X("div",Dt,[p(L,{class:"rotating"},{default:D(()=>[p(me)]),_:1}),r[12]||(r[12]=b("p",null,"AI正在分析中，请稍候...",-1)),b("div",Rt,[(Y(!0),X(je,null,qe(S.value,E=>(Y(),X("div",{key:E,class:"loading-message"},oe(E),1))),128))])])):W("",!0),h.value?(Y(),X("div",xt,[b("div",It,oe(h.value),1)])):W("",!0),x.value?(Y(),X("div",Ft,[p(B,{title:x.value,type:"error","show-icon":"",closable:!1},null,8,["title"])])):W("",!0)])):W("",!0),N.value.length>0?(Y(),X("div",Ot,[b("div",Nt,[r[14]||(r[14]=b("h3",null,"历史分析记录",-1)),p(K,{type:"danger",size:"small",onClick:be},{default:D(()=>[p(L,null,{default:D(()=>[p(te)]),_:1}),r[13]||(r[13]=re(" 清空记录 ",-1))]),_:1})]),b("div",Mt,[(Y(!0),X(je,null,qe(N.value,(E,_e)=>(Y(),X("div",{key:_e,class:"history-item"},[b("div",Lt,[b("div",Yt,[p(he,{type:Te(E.type)},{default:D(()=>[re(oe(le(E.type)),1)]),_:2},1032,["type"]),b("span",Ht,oe(E.params),1)]),b("div",Vt,oe(pe(E.timestamp)),1)]),b("div",kt,oe(E.result),1)]))),128))])])):W("",!0)])}}},Kt=yt(Pt,[["__scopeId","data-v-ce5b5fa1"]]);export{Kt as default};
