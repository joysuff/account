import"./request-Ca-4kpEd.js";/* empty css               *//* empty css                   *//* empty css                  *//* empty css                             *//* empty css                 *//* empty css                     */import{_ as $,r,I as Y,J as B,p as L,c,o as l,b as t,d as s,K as N,x as n,w as u,L as P,g as k,M as A,k as T,l as I,E as z,N as F,O,P as U,Q as j,q,R as H,S as J,n as K}from"./index-Dt_27I2L.js";import{u as Q,g as G,a as W,b as X,i as Z,c as ee,d as te,e as se,f as ae}from"./statistics-DrDu4Vzf.js";import{_ as oe}from"./RecordDialog-zu2Bf4yh.js";/* empty css                     *//* empty css               *//* empty css                  *//* empty css                 */import"./categories-BKLupkKH.js";import"./records-BP0fdX-l.js";const le={class:"dashboard"},ne={class:"page-header"},de={class:"stats-grid"},ie={class:"stat-card income-card"},re={class:"stat-value"},ce={class:"stat-card expense-card"},ue={class:"stat-value"},me={class:"stat-card balance-card"},pe={class:"stat-value"},ve={class:"stat-card monthly-card"},_e={class:"stat-value"},ye={class:"card"},fe={class:"card-header"},he={key:0,class:"loading-container"},ge={key:1,class:"empty-state"},xe={key:2,class:"records-list"},De={class:"record-info"},be={class:"record-category"},Ye={class:"record-remark"},ke={class:"card"},Me={class:"chart-container"},Se={key:1,class:"empty-state"},Re={__name:"Dashboard",setup(Ce){Q([Z,ee,te,se,ae]);const h=r(!1),y=r(Y().format("YYYY-MM-DD")),g=r(!1),m=r({income:0,expense:0}),x=r({income:0,expense:0}),p=r([]),d=r([]),v=a=>Number(a).toFixed(2),S=B(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["收入","支出"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:d.value.map(a=>Y(a.date).format("MM-DD"))},yAxis:{type:"value",axisLabel:{formatter:"¥{value}"}},series:[{name:"收入",type:"line",data:d.value.map(a=>a.income),itemStyle:{color:"#67c23a"},smooth:!0},{name:"支出",type:"line",data:d.value.map(a=>a.expense),itemStyle:{color:"#f56c6c"},smooth:!0}]})),D=async()=>{var a,e,f;h.value=!0;try{m.value={income:0,expense:0},x.value={income:0,expense:0},p.value=[],d.value=[];const i=await G({date:y.value});m.value={income:((a=i.data)==null?void 0:a.income)||0,expense:((e=i.data)==null?void 0:e.expense)||0},p.value=((f=i.data)==null?void 0:f.records)||[];const _=await W({month:Y(y.value).format("YYYY-MM")});x.value=_.data||{income:0,expense:0};const b=await X({days:7});d.value=b.data||[]}catch(i){console.error("获取仪表盘数据失败:",i),p.value=[],d.value=[]}finally{h.value=!1}},R=()=>{D(),K.success("记录添加成功")};return L(()=>{D()}),(a,e)=>{const f=N,i=k("Plus"),_=z,b=T,C=F,E=k("DocumentRemove"),M=A,V=k("TrendCharts"),w=P;return l(),c("div",le,[t("div",ne,[e[3]||(e[3]=t("h1",{class:"page-title"},"仪表盘",-1)),s(f,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=o=>y.value=o),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:D},null,8,["modelValue"])]),t("div",de,[t("div",ie,[t("div",re,"¥"+n(v(m.value.income)),1),e[4]||(e[4]=t("div",{class:"stat-label"},"今日收入",-1))]),t("div",ce,[t("div",ue,"¥"+n(v(m.value.expense)),1),e[5]||(e[5]=t("div",{class:"stat-label"},"今日支出",-1))]),t("div",me,[t("div",pe,"¥"+n(v(m.value.income-m.value.expense)),1),e[6]||(e[6]=t("div",{class:"stat-label"},"今日结余",-1))]),t("div",ve,[t("div",_e,"¥"+n(v(x.value.expense)),1),e[7]||(e[7]=t("div",{class:"stat-label"},"本月支出",-1))])]),s(w,{gutter:20},{default:u(()=>[s(M,{span:12},{default:u(()=>[t("div",ye,[t("div",fe,[e[9]||(e[9]=t("h3",null,"明细",-1)),s(b,{type:"primary",size:"small",onClick:e[1]||(e[1]=o=>g.value=!0)},{default:u(()=>[s(_,null,{default:u(()=>[s(i)]),_:1}),e[8]||(e[8]=I(" 记一笔 ",-1))]),_:1})]),h.value?(l(),c("div",he,[s(C)])):p.value.length===0?(l(),c("div",ge,[s(_,null,{default:u(()=>[s(E)]),_:1}),e[10]||(e[10]=t("p",null,"暂无记录",-1))])):(l(),c("div",xe,[(l(!0),c(O,null,U(p.value,o=>(l(),c("div",{key:o.id,class:"record-item"},[t("div",De,[t("div",be,n(o.category.name),1),t("div",Ye,n(o.remark||"无备注"),1)]),t("div",{class:j(["record-amount",o.type])},n(o.type==="income"?"+":"-")+"¥"+n(v(o.amount)),3)]))),128))]))])]),_:1}),s(M,{span:12},{default:u(()=>[t("div",ke,[e[12]||(e[12]=t("div",{class:"card-header"},[t("h3",null,"近7天趋势")],-1)),t("div",Me,[d.value.length>0?(l(),q(H(J),{key:0,option:S.value},null,8,["option"])):(l(),c("div",Se,[s(_,null,{default:u(()=>[s(V)]),_:1}),e[11]||(e[11]=t("p",null,"暂无趋势数据",-1))]))])])]),_:1})]),_:1}),s(oe,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),onSuccess:R},null,8,["modelValue"])])}}},qe=$(Re,[["__scopeId","data-v-f0c0dda4"]]);export{qe as default};
