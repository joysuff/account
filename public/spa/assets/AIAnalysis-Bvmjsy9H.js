import"./request-CVhcPHCR.js";/* empty css                     *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                             *//* empty css                 *//* empty css                  *//* empty css                 */import{fP as Ze,fQ as et,r as ve,a as tt,I as He,J as nt,p as rt,c as X,o as Y,b as T,fR as W,d as p,w as A,k as at,_ as ot,f as st,q as Re,E as it,O as Ue,P as Be,x as oe,fS as lt,g as xe,l as re,$ as dt,h as ut,K as ct,a0 as ft,a1 as vt,Y as pt,n as P}from"./index-DvUvldwB.js";import{_ as ht}from"./_plugin-vue_export-helper-DlAUqK2U.js";var Ve={exports:{}};/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */(function(we,S){(function(v){var h=v.setTimeout,x=v.clearTimeout,g=v.XMLHttpRequest,I=v.XDomainRequest,D=v.ActiveXObject,se=v.EventSource,j=v.document,Ie=v.Promise,ie=v.fetch,Se=v.Response,le=v.TextDecoder,Te=v.TextEncoder,pe=v.AbortController;if(typeof window<"u"&&typeof j<"u"&&!("readyState"in j)&&j.body==null&&(j.readyState="loading",window.addEventListener("load",function(e){j.readyState="complete"},!1)),g==null&&D!=null&&(g=function(){return new D("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(e){function n(){}return n.prototype=e,new n}),Date.now||(Date.now=function(){return new Date().getTime()}),pe==null){var Fe=ie;ie=function(e,n){var a=n.signal;return Fe(e,{headers:n.headers,credentials:n.credentials,cache:n.cache}).then(function(t){var s=t.body.getReader();return a._reader=s,a._aborted&&a._reader.cancel(),{status:t.status,statusText:t.statusText,headers:t.headers,body:{getReader:function(){return s}}}})},pe=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function Ce(){this.bitsNeeded=0,this.codePoint=0}Ce.prototype.decode=function(e){function n(u,f,i){if(i===1)return u>=128>>f&&u<<f<=2047;if(i===2)return u>=2048>>f&&u<<f<=55295||u>=57344>>f&&u<<f<=65535;if(i===3)return u>=65536>>f&&u<<f<=1114111;throw new Error}function a(u,f){if(u===6*1)return f>>6>15?3:f>31?2:1;if(u===6*2)return f>15?3:2;if(u===6*3)return 3;throw new Error}for(var t=65533,s="",o=this.bitsNeeded,l=this.codePoint,m=0;m<e.length;m+=1){var d=e[m];o!==0&&(d<128||d>191||!n(l<<6|d&63,o-6,a(o,l)))&&(o=0,l=t,s+=String.fromCharCode(l)),o===0?(d>=0&&d<=127?(o=0,l=d):d>=192&&d<=223?(o=6*1,l=d&31):d>=224&&d<=239?(o=6*2,l=d&15):d>=240&&d<=247?(o=6*3,l=d&7):(o=0,l=t),o!==0&&!n(l,o,a(o,l))&&(o=0,l=t)):(o-=6,l=l<<6|d&63),o===0&&(l<=65535?s+=String.fromCharCode(l):(s+=String.fromCharCode(55296+(l-65535-1>>10)),s+=String.fromCharCode(56320+(l-65535-1&1023))))}return this.bitsNeeded=o,this.codePoint=l,s};var y=function(){try{return new le().decode(new Te().encode("test"),{stream:!0})==="test"}catch(e){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+e)}return!1};(le==null||Te==null||!y())&&(le=Ce);var r=function(){};function M(e){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=r,this.onload=r,this.onerror=r,this.onreadystatechange=r,this._contentType="",this._xhr=e,this._sendTimeout=0,this._abort=r}M.prototype.open=function(e,n){this._abort(!0);var a=this,t=this._xhr,s=1,o=0;this._abort=function(i){a._sendTimeout!==0&&(x(a._sendTimeout),a._sendTimeout=0),(s===1||s===2||s===3)&&(s=4,t.onload=r,t.onerror=r,t.onabort=r,t.onprogress=r,t.onreadystatechange=r,t.abort(),o!==0&&(x(o),o=0),i||(a.readyState=4,a.onabort(null),a.onreadystatechange())),s=0};var l=function(){if(s===1){var i=0,_="",J=void 0;if("contentType"in t)i=200,_="OK",J=t.contentType;else try{i=t.status,_=t.statusText,J=t.getResponseHeader("Content-Type")}catch{i=0,_="",J=void 0}i!==0&&(s=2,a.readyState=2,a.status=i,a.statusText=_,a._contentType=J,a.onreadystatechange())}},m=function(){if(l(),s===2||s===3){s=3;var i="";try{i=t.responseText}catch{}a.readyState=3,a.responseText=i,a.onprogress()}},d=function(i,_){if((_==null||_.preventDefault==null)&&(_={preventDefault:r}),m(),s===1||s===2||s===3){if(s=4,o!==0&&(x(o),o=0),a.readyState=4,i==="load")a.onload(_);else if(i==="error")a.onerror(_);else if(i==="abort")a.onabort(_);else throw new TypeError;a.onreadystatechange()}},u=function(i){t!=null&&(t.readyState===4?(!("onload"in t)||!("onerror"in t)||!("onabort"in t))&&d(t.responseText===""?"error":"load",i):t.readyState===3?"onprogress"in t||m():t.readyState===2&&l())},f=function(){o=h(function(){f()},500),t.readyState===3&&m()};"onload"in t&&(t.onload=function(i){d("load",i)}),"onerror"in t&&(t.onerror=function(i){d("error",i)}),"onabort"in t&&(t.onabort=function(i){d("abort",i)}),"onprogress"in t&&(t.onprogress=m),"onreadystatechange"in t&&(t.onreadystatechange=function(i){u(i)}),("contentType"in t||!("ontimeout"in g.prototype))&&(n+=(n.indexOf("?")===-1?"?":"&")+"padding=true"),t.open(e,n,!0),"readyState"in t&&(o=h(function(){f()},0))},M.prototype.abort=function(){this._abort(!1)},M.prototype.getResponseHeader=function(e){return this._contentType},M.prototype.setRequestHeader=function(e,n){var a=this._xhr;"setRequestHeader"in a&&a.setRequestHeader(e,n)},M.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},M.prototype.send=function(){if((!("ontimeout"in g.prototype)||!("sendAsBinary"in g.prototype)&&!("mozAnon"in g.prototype))&&j!=null&&j.readyState!=null&&j.readyState!=="complete"){var e=this;e._sendTimeout=h(function(){e._sendTimeout=0,e.send()},4);return}var n=this._xhr;"withCredentials"in n&&(n.withCredentials=this.withCredentials);try{n.send(void 0)}catch(a){throw a}};function L(e){return e.replace(/[A-Z]/g,function(n){return String.fromCharCode(n.charCodeAt(0)+32)})}function K(e){for(var n=Object.create(null),a=e.split(`\r
`),t=0;t<a.length;t+=1){var s=a[t],o=s.split(": "),l=o.shift(),m=o.join(": ");n[L(l)]=m}this._map=n}K.prototype.get=function(e){return this._map[L(e)]},g!=null&&g.HEADERS_RECEIVED==null&&(g.HEADERS_RECEIVED=2);function Z(){}Z.prototype.open=function(e,n,a,t,s,o,l){e.open("GET",s);var m=0;e.onprogress=function(){var u=e.responseText,f=u.slice(m);m+=f.length,a(f)},e.onerror=function(u){u.preventDefault(),t(new Error("NetworkError"))},e.onload=function(){t(null)},e.onabort=function(){t(null)},e.onreadystatechange=function(){if(e.readyState===g.HEADERS_RECEIVED){var u=e.status,f=e.statusText,i=e.getResponseHeader("Content-Type"),_=e.getAllResponseHeaders();n(u,f,i,new K(_))}},e.withCredentials=o;for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&e.setRequestHeader(d,l[d]);return e.send(),e};function E(e){this._headers=e}E.prototype.get=function(e){return this._headers.get(e)};function c(){}c.prototype.open=function(e,n,a,t,s,o,l){var m=null,d=new pe,u=d.signal,f=new le;return ie(s,{headers:l,credentials:o?"include":"same-origin",signal:u,cache:"no-store"}).then(function(i){return m=i.body.getReader(),n(i.status,i.statusText,i.headers.get("Content-Type"),new E(i.headers)),new Ie(function(_,J){var ge=function(){m.read().then(function(H){if(H.done)_(void 0);else{var F=f.decode(H.value,{stream:!0});a(F),ge()}}).catch(function(H){J(H)})};ge()})}).catch(function(i){if(i.name!=="AbortError")return i}).then(function(i){t(i)}),{abort:function(){m!=null&&m.cancel(),d.abort()}}};function G(){this._listeners=Object.create(null)}function de(e){h(function(){throw e},0)}G.prototype.dispatchEvent=function(e){e.target=this;var n=this._listeners[e.type];if(n!=null)for(var a=n.length,t=0;t<a;t+=1){var s=n[t];try{typeof s.handleEvent=="function"?s.handleEvent(e):s.call(this,e)}catch(o){de(o)}}},G.prototype.addEventListener=function(e,n){e=String(e);var a=this._listeners,t=a[e];t==null&&(t=[],a[e]=t);for(var s=!1,o=0;o<t.length;o+=1)t[o]===n&&(s=!0);s||t.push(n)},G.prototype.removeEventListener=function(e,n){e=String(e);var a=this._listeners,t=a[e];if(t!=null){for(var s=[],o=0;o<t.length;o+=1)t[o]!==n&&s.push(t[o]);s.length===0?delete a[e]:a[e]=s}};function ee(e){this.type=e,this.target=void 0}function he(e,n){ee.call(this,e),this.data=n.data,this.lastEventId=n.lastEventId}he.prototype=Object.create(ee.prototype);function ye(e,n){ee.call(this,e),this.status=n.status,this.statusText=n.statusText,this.headers=n.headers}ye.prototype=Object.create(ee.prototype);function be(e,n){ee.call(this,e),this.error=n.error}be.prototype=Object.create(ee.prototype);var me=-1,q=0,te=1,w=2,_e=-1,ne=0,Oe=1,ke=2,qe=3,Xe=/^text\/event\-stream(;.*)?$/i,Ge=1e3,Je=18e6,Ne=function(e,n){var a=e==null?n:parseInt(e,10);return a!==a&&(a=n),Me(a)},Me=function(e){return Math.min(Math.max(e,Ge),Je)},ue=function(e,n,a){try{typeof n=="function"&&n.call(e,a)}catch(t){de(t)}};function U(e,n){G.call(this),n=n||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Qe(this,e,n)}function $e(){return g!=null&&"withCredentials"in g.prototype||I==null?new g:new I}var ze=ie!=null&&Se!=null&&"body"in Se.prototype;function Qe(e,n,a){n=String(n);var t=!!a.withCredentials,s=a.lastEventIdQueryParameterName||"lastEventId",o=Me(1e3),l=Ne(a.heartbeatTimeout,45e3),m="",d=o,u=!1,f=0,i=a.headers||{},_=a.Transport,J=ze&&_==null?void 0:new M(_!=null?new _:$e()),ge=_!=null&&typeof _!="string"?new _:J==null?new c:new Z,H=void 0,F=0,B=me,ce="",Ae="",$="",De="",O=ne,Le=0,ae=0,We=function(b,C,V,k){if(B===q)if(b===200&&V!=null&&Xe.test(V)){B=te,u=Date.now(),d=o,e.readyState=te;var N=new ye("open",{status:b,statusText:C,headers:k});e.dispatchEvent(N),ue(e,e.onopen,N)}else{var R="";b!==200?(C&&(C=C.replace(/\s+/g," ")),R="EventSource's response has a status "+b+" "+C+" that is not 200. Aborting the connection."):R="EventSource's response has a Content-Type specifying an unsupported type: "+(V==null?"-":V.replace(/\s+/g," "))+". Aborting the connection.",Ye();var N=new ye("error",{status:b,statusText:C,headers:k});e.dispatchEvent(N),ue(e,e.onerror,N),console.error(R)}},Ke=function(b){if(B===te){for(var C=-1,V=0;V<b.length;V+=1){var k=b.charCodeAt(V);(k===10||k===13)&&(C=V)}var N=(C!==-1?De:"")+b.slice(0,C+1);De=(C===-1?De:"")+b.slice(C+1),b!==""&&(u=Date.now(),f+=b.length);for(var R=0;R<N.length;R+=1){var k=N.charCodeAt(R);if(O===_e&&k===10)O=ne;else if(O===_e&&(O=ne),k===13||k===10){if(O!==ne){O===Oe&&(ae=R+1);var z=N.slice(Le,ae-1),Q=N.slice(ae+(ae<R&&N.charCodeAt(ae)===32?1:0),R);z==="data"?(ce+=`
`,ce+=Q):z==="id"?Ae=Q:z==="event"?$=Q:z==="retry"?(o=Ne(Q,o),d=o):z==="heartbeatTimeout"&&(l=Ne(Q,l),F!==0&&(x(F),F=h(function(){Ee()},l)))}if(O===ne){if(ce!==""){m=Ae,$===""&&($="message");var fe=new he($,{data:ce.slice(1),lastEventId:Ae});if(e.dispatchEvent(fe),$==="open"?ue(e,e.onopen,fe):$==="message"?ue(e,e.onmessage,fe):$==="error"&&ue(e,e.onerror,fe),B===w)return}ce="",$=""}O=k===13?_e:ne}else O===ne&&(Le=R,O=Oe),O===Oe?k===58&&(ae=R+1,O=ke):O===ke&&(O=qe)}}},je=function(b){if(B===te||B===q){B=me,F!==0&&(x(F),F=0),F=h(function(){Ee()},d),d=Me(Math.min(o*16,d*2)),e.readyState=q;var C=new be("error",{error:b});e.dispatchEvent(C),ue(e,e.onerror,C),b!=null&&console.error(b)}},Ye=function(){B=w,H!=null&&(H.abort(),H=void 0),F!==0&&(x(F),F=0),e.readyState=w},Ee=function(){if(F=0,B!==me){if(!u&&H!=null)je(new Error("No activity within "+l+" milliseconds. "+(B===q?"No response received.":f+" chars received.")+" Reconnecting.")),H!=null&&(H.abort(),H=void 0);else{var b=Math.max((u||Date.now())+l-Date.now(),1);u=!1,F=h(function(){Ee()},b)}return}u=!1,f=0,F=h(function(){Ee()},l),B=q,ce="",$="",Ae=m,De="",Le=0,ae=0,O=ne;var C=n;if(n.slice(0,5)!=="data:"&&n.slice(0,5)!=="blob:"&&m!==""){var V=n.indexOf("?");C=V===-1?n:n.slice(0,V+1)+n.slice(V+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(Q,fe){return fe===s?"":Q}),C+=(n.indexOf("?")===-1?"?":"&")+s+"="+encodeURIComponent(m)}var k=e.withCredentials,N={};N.Accept="text/event-stream";var R=e.headers;if(R!=null)for(var z in R)Object.prototype.hasOwnProperty.call(R,z)&&(N[z]=R[z]);try{H=ge.open(J,We,Ke,je,C,k,N)}catch(Q){throw Ye(),Q}};e.url=n,e.readyState=q,e.withCredentials=t,e.headers=i,e._close=Ye,Ee()}U.prototype=Object.create(G.prototype),U.prototype.CONNECTING=q,U.prototype.OPEN=te,U.prototype.CLOSED=w,U.prototype.close=function(){this._close()},U.CONNECTING=q,U.OPEN=te,U.CLOSED=w,U.prototype.withCredentials=void 0;var Pe=se;g!=null&&(se==null||!("withCredentials"in se.prototype))&&(Pe=U),function(e){{var n=e(S);n!==void 0&&(we.exports=n)}}(function(e){e.EventSourcePolyfill=U,e.NativeEventSource=se,e.EventSource=Pe})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:Ze:globalThis)})(Ve,Ve.exports);var yt=Ve.exports;function mt(we,S){const h={daily:"/analysisDaily",monthly:"/analysisMonthly",recent:"/analysisRecent"}[we];if(!h)throw new Error("不支持的分析类型");const x=new URLSearchParams(S).toString(),g=`http://localhost:3000/api${h}?${x}`,I=et();if(!I)throw new Error("未登录或登录已过期");return new yt.EventSourcePolyfill(g,{headers:{Authorization:`Bearer ${I}`},withCredentials:!1,heartbeatTimeout:3e4,connectionTimeout:1e4})}const _t={class:"ai-analysis"},gt={class:"page-header"},Et={class:"card"},wt={class:"form-section"},St={class:"form-section"},Tt={style:{display:"flex","align-items":"center",gap:"12px"}},Ct={key:0,class:"card"},bt={class:"card-header"},At={key:0,class:"analysis-loading"},Dt={class:"loading-messages"},Rt={key:1,class:"ai-analysis-result"},xt={class:"ai-content"},It={key:2,class:"analysis-error"},Ft={key:1,class:"card"},Ot={class:"card-header"},Nt={class:"history-list"},Mt={class:"history-header"},Lt={class:"history-info"},Yt={class:"history-params"},Ht={class:"history-time"},Vt={class:"history-content"},kt={__name:"AIAnalysis",setup(we){const S=ve(!1),v=ve("daily"),h=ve(""),x=ve(""),g=ve([]),I=ve([]),D=tt({date:He().format("YYYY-MM-DD"),month:He().format("YYYY-MM"),days:7}),se=nt(()=>`近${D.days}天`),j=()=>{h.value="",x.value="",g.value=[]},Ie=async()=>{if(!S.value){j(),S.value=!0,g.value=[];try{let y={};switch(v.value){case"daily":y.date=D.date;break;case"monthly":y.month=D.month;break;case"recent":y.days=D.days;break}const r=mt(v.value,y);r.onopen=()=>{console.log("SSE连接已建立"),g.value.push("已连接到AI服务"),M=!0};let M=!1,L=!1;r.addEventListener("message",E=>{try{if(L=!0,!E.data){console.warn("message事件数据为空");return}const c=JSON.parse(E.data);c.content&&(g.value.push(c.content),(c.content.includes("无数据")||c.content.includes("没有数据")||c.content.includes("无收入支出账单"))&&(h.value=c.content,S.value=!1,r.close(),P.info("查询完成")))}catch(c){console.error("解析message事件失败:",c,"event.data:",E.data)}}),r.addEventListener("analysis",E=>{try{if(L=!0,!E.data){console.warn("analysis事件数据为空");return}const c=JSON.parse(E.data);c.content&&(h.value+=c.content)}catch(c){console.error("解析analysis事件失败:",c,"event.data:",E.data)}}),r.addEventListener("error",E=>{try{if(!E.data)if(console.warn("error事件数据为空，可能是连接错误或服务器直接关闭连接"),M&&!L){console.log("连接已建立但未收到数据，等待message事件...");return}else if(M&&L){h.value="分析过程中出现错误，请重试",P.warning("分析中断"),S.value=!1,r.close();return}else{P.error("连接错误或服务器异常"),S.value=!1,r.close();return}const c=JSON.parse(E.data);P.error(c.message||"分析失败"),S.value=!1,r.close()}catch(c){console.error("解析error事件失败:",c,"event.data:",E.data),P.error("服务器返回了无效的错误信息"),S.value=!1,r.close()}}),r.addEventListener("end",E=>{try{if(L=!0,!E.data){console.warn("end事件数据为空"),S.value=!1,r.close(),P.success("分析完成");return}const c=JSON.parse(E.data);c.content&&(h.value=c.content),ie(),r.close(),S.value=!1,P.success("AI分析完成")}catch(c){console.error("解析end事件失败:",c,"event.data:",E.data),S.value=!1,r.close()}}),r.onerror=E=>{console.error("SSE连接错误:",E),x.value="连接AI分析服务失败，请检查网络连接",r.close(),S.value=!1};const K=setTimeout(()=>{S.value&&(r.close(),S.value=!1,M&&!L?(console.log("分析超时：连接已建立但未收到数据，等待message事件..."),x.value="分析超时，请稍后重试",P.error("分析超时")):(x.value="分析超时，请稍后重试",P.error("分析超时")))},6e4),Z=r.close;r.close=function(){clearTimeout(K),Z.call(this)}}catch(y){console.error("分析失败:",y),x.value=y.message||"启动分析失败",S.value=!1}}},ie=()=>{const y={type:v.value,params:Se(),result:h.value,timestamp:Date.now()};I.value.unshift(y),I.value.length>10&&(I.value=I.value.slice(0,10)),localStorage.setItem("ai_analysis_history",JSON.stringify(I.value))},Se=()=>{switch(v.value){case"daily":return D.date;case"monthly":return D.month;case"recent":return`近${D.days}天`;default:return""}},le=y=>({daily:"日分析",monthly:"月分析",recent:"近期分析"})[y]||y,Te=y=>({daily:"primary",monthly:"success",recent:"warning"})[y]||"info",pe=y=>He(y).format("YYYY-MM-DD HH:mm:ss"),Fe=async()=>{try{await navigator.clipboard.writeText(h.value),P.success("分析结果已复制到剪贴板")}catch{P.error("复制失败")}},Ce=()=>{I.value=[],localStorage.removeItem("ai_analysis_history"),P.success("历史记录已清空")};return rt(()=>{const y=localStorage.getItem("ai_analysis_history");if(y)try{I.value=JSON.parse(y)}catch(r){console.error("加载历史记录失败:",r)}}),(y,r)=>{const M=xe("ChatDotRound"),L=it,K=at,Z=dt,E=ot,c=ct,G=ut,de=vt,ee=ft,he=pt,ye=st,be=xe("CopyDocument"),me=xe("Loading"),q=lt,te=xe("Delete");return Y(),X("div",_t,[T("div",gt,[r[5]||(r[5]=T("h1",{class:"page-title"},"AI分析",-1)),p(K,{type:"primary",loading:S.value,onClick:Ie},{default:A(()=>[p(L,null,{default:A(()=>[p(M)]),_:1}),r[4]||(r[4]=re(" 开始分析 ",-1))]),_:1},8,["loading"])]),T("div",Et,[T("div",wt,[r[9]||(r[9]=T("h3",{class:"form-title"},"选择分析类型",-1)),p(E,{modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=w=>v.value=w),onChange:j},{default:A(()=>[p(Z,{label:"daily"},{default:A(()=>[...r[6]||(r[6]=[re("日账单分析",-1)])]),_:1}),p(Z,{label:"monthly"},{default:A(()=>[...r[7]||(r[7]=[re("月账单分析",-1)])]),_:1}),p(Z,{label:"recent"},{default:A(()=>[...r[8]||(r[8]=[re("近期账单分析",-1)])]),_:1})]),_:1},8,["modelValue"])]),T("div",St,[p(ye,{model:D,inline:""},{default:A(()=>[v.value==="daily"?(Y(),Re(G,{key:0,label:"选择日期"},{default:A(()=>[p(c,{modelValue:D.date,"onUpdate:modelValue":r[1]||(r[1]=w=>D.date=w),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})):W("",!0),v.value==="monthly"?(Y(),Re(G,{key:1,label:"选择月份"},{default:A(()=>[p(c,{modelValue:D.month,"onUpdate:modelValue":r[2]||(r[2]=w=>D.month=w),type:"month",placeholder:"选择月份",format:"YYYY-MM","value-format":"YYYY-MM"},null,8,["modelValue"])]),_:1})):W("",!0),v.value==="recent"?(Y(),Re(G,{key:2,label:"天数"},{default:A(()=>[T("div",Tt,[p(ee,{modelValue:D.days,"onUpdate:modelValue":r[3]||(r[3]=w=>D.days=w),placeholder:"选择天数",style:{width:"120px"}},{default:A(()=>[p(de,{label:"近7天",value:7}),p(de,{label:"近15天",value:15}),p(de,{label:"近30天",value:30})]),_:1},8,["modelValue"]),p(he,{type:"info",size:"small"},{default:A(()=>[re(oe(se.value),1)]),_:1})])]),_:1})):W("",!0)]),_:1},8,["model"])])]),h.value||S.value?(Y(),X("div",Ct,[T("div",bt,[r[11]||(r[11]=T("h3",null,"AI分析结果",-1)),h.value?(Y(),Re(K,{key:0,type:"success",size:"small",onClick:Fe},{default:A(()=>[p(L,null,{default:A(()=>[p(be)]),_:1}),r[10]||(r[10]=re(" 复制结果 ",-1))]),_:1})):W("",!0)]),S.value?(Y(),X("div",At,[p(L,{class:"rotating"},{default:A(()=>[p(me)]),_:1}),r[12]||(r[12]=T("p",null,"AI正在分析中，请稍候...",-1)),T("div",Dt,[(Y(!0),X(Ue,null,Be(g.value,w=>(Y(),X("div",{key:w,class:"loading-message"},oe(w),1))),128))])])):W("",!0),h.value?(Y(),X("div",Rt,[T("div",xt,oe(h.value),1)])):W("",!0),x.value?(Y(),X("div",It,[p(q,{title:x.value,type:"error","show-icon":"",closable:!1},null,8,["title"])])):W("",!0)])):W("",!0),I.value.length>0?(Y(),X("div",Ft,[T("div",Ot,[r[14]||(r[14]=T("h3",null,"历史分析记录",-1)),p(K,{type:"danger",size:"small",onClick:Ce},{default:A(()=>[p(L,null,{default:A(()=>[p(te)]),_:1}),r[13]||(r[13]=re(" 清空记录 ",-1))]),_:1})]),T("div",Nt,[(Y(!0),X(Ue,null,Be(I.value,(w,_e)=>(Y(),X("div",{key:_e,class:"history-item"},[T("div",Mt,[T("div",Lt,[p(he,{type:Te(w.type)},{default:A(()=>[re(oe(le(w.type)),1)]),_:2},1032,["type"]),T("span",Yt,oe(w.params),1)]),T("div",Ht,oe(pe(w.timestamp)),1)]),T("div",Vt,oe(w.result),1)]))),128))])])):W("",!0)])}}},Wt=ht(kt,[["__scopeId","data-v-ce5b5fa1"]]);export{Wt as default};
